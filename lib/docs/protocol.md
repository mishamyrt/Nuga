# USB backlight protocol

The keypad backlight (not contour halo) is controlled by means of two queries. One lists the effect colors, the other lists the parameters.

### Params

#### Read

1. SET_REPORT 5 `0x05, 0x83, 0xb6, 0x00, 0x00, 0x00`
2. GET_REPORT 6

In response, a similar result will come twice. The values will be the same. This is probably to confirm that the data transfer is correct.

```sh
# Header
0x06, 0x83, 0xb6, 0x00, 0x00, 0x00, 0x00, 0x00,
# Header 2?
0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x5a, 0xa5,
#                 Current effect ↓
0x03, 0x03, 0x03, 0x00, 0x00, 0x01, 0x20, 0x00,
0x00, 0x00, 0x00, 0x00, 0x05, 0x00, 0x04, 0x00,
0x02, 0x00, 0x04, 0x00, 0xff, 0xff, 0x00, 0x44,
0x07, 0x44, 0x00, 0x44, 0x07, 0x44, 0x07, 0x44,
0x00, 0x44, 0x07, 0x44, 0x07, 0x44, 0x07, 0x44,
0x07, 0x44, 0x07, 0x44, 0x07, 0x44, 0x07, 0x44,
0x07, 0x44, 0x07, 0x44, 0x07, 0x44, 0x07, 0x44,
0x07, 0x44, 0x07, 0x44, 0x07, 0x44, 0x07, 0x44,
0x07, 0x44, 0x07, 0x44, 0x07, 0x44, 0x07, 0x44,
0x07, 0x44, 0x07, 0x44, 0x07, 0x44, 0x07, 0x44,
0x04, 0x04, 0x04, 0x04, 0x04, 0x04, 0x04, 0x04,
0x04, 0x04, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01,
0x00, 0x01, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x5a, 0xa5
```

#### Structure

The parameter description consists of the following parts:

```sh
# ↓ Header
0x03, 0x03, 0x03, 0x00, 0x00,
# ↓ Current effect, single byte
0x01,
# ↓ Header 2
0x20, 0x00, 0x00, 0x00, 0x00, 0x00,
0x05, 0x00, 0x04, 0x00, 0x02, 0x00,
0x04, 0x00, 0xFF, 0xFF,
# Effect parameters. To set the 0x05 effect parameters, you must change the 5 entry and so on.
# 29 pairs of color (0-7) and a value that is calculated from brightness (0-4) and speed (0-4).
# 7 in color means Random.
# value = (speed * 16) + brightness
0x07, 0x44, 0x07, 0x44, 0x07, 0x44,
0x07, 0x44, 0x07, 0x44, 0x07, 0x44,
0x07, 0x44, 0x07, 0x44, 0x07, 0x44,
0x07, 0x44, 0x07, 0x44, 0x07, 0x44,
0x07, 0x44, 0x07, 0x44, 0x07, 0x44,
0x07, 0x44, 0x07, 0x44, 0x07, 0x44,
0x07, 0x44, 0x07, 0x44, 0x07, 0x44,
0x07, 0x44, 0x07, 0x44, 0x07, 0x44,
0x07, 0x44, 0x07, 0x44, 0x07, 0x44,
0x07, 0x44, 0x07, 0x44,
# Suffix
0x04, 0x04, 0x04, 0x04, 0x04, 0x04,
0x04, 0x04, 0x04, 0x04, 0x00, 0x00,
0x00, 0x00, 0x01, 0x01, 0x00, 0x01,
0x01, 0x01, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00,
0x5A, 0xA5
```

### Write



```sh
0x06, 0x03, 0xb6, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x5a, 0xa5,


### Colors

1. SET_REPORT 5 `0x05, 0x88, 0xb8, 0x00, 0x00, 0x00`
2. GET_REPORT 6
